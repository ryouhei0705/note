---
layout: default
title: gitで過去に戻る方法
---
> **注意:** この備忘録は生成AIによる未検証の内容を含みます。

# gitで過去に戻る方法

- どの段階まで作業を進めてしまったかによって使うコマンドが異なります。

## ファイル編集を保存前の状態に戻したい(git add する前)

```bash
# 特定のファイルの変更を取り消して、最後にコミットした時の状態に戻します。
git restore ファイル名

# 全てのファイルの変更を消したい場合
git restore .
```

## git add したのを取り消す

```bash
# ファイルの内容はそのままで、add だけをキャンセルします。
git restore --staged ファイル名
```

## 直前のコミットをやり直したい

```bash
# 新しく add してからこのコマンドを打つと、直前のコミットを上書きできます。
git commit --amend -m "新しいコミットメッセージ"
```

## 数個前のコミットまでガッツリ戻したい

```bash
# 戻したい場所の「コミットハッシュ（abc1234 のような英数字）」を git log で確認してから実行します。
git reset --soft HEAD~1,1つ前に戻る。書いたコードは残る。,★★★ (安全)
git reset --hard HEAD~1,1つ前に戻る。書いたコードも消える。,★☆☆ (危険)

# 特定の地点に戻る
git reset --soft コミットハッシュ
```

## すでにPush(公開)した後に戻したい場合
- GitHub上の履歴を消して戻すと、他の人と整合性が取れなくなるため、**「打ち消し用のコミット」**を作るのが安全です。

```bash
# 過去の変更を逆にする操作を新しく記録する
git revert コミットハッシュ
```

## 戻しすぎた時
- git reflog
- 戻りたい操作（HEAD@{1} など）を探す。
- git reset --hard HEAD@{番号} でその操作の直前までタイムトラベルできます。

* [目次へ戻る](../index.md)